<form action="/new" method="post">
    <div id="creation-form">
        <div><span>Title</span><input type="text" name="title"></div>
        <div><span>Description</span><input type="text" name="description"></div>
        <div><span>Deadline</span>
            <input type="checkbox" name="has_deadline">
            <input type="datetime-local" name="deadline" min="<%= DateTime.now.to_s.split('T')[0] + "00:00"%>"></div>
        <div>
            <span>category</span>
            <button type="button" id="new-category">+</button>
            <select id="category_selection" name="category">
                <% @categories.each do | list |%>
                    <option><%= list['category'] %></option>
                <% end %>
            </select> 
        </div>
        <div><span>Importance</span><input type="range" value="3" min="1" max="5" step="1" name="importance"></div>

        <div id="form-button-container">
        <button type="submit"> NEW </button>
        </div>
    </div>
</form>

<script type="text/javascript">
    document.querySelector("#new-category").addEventListener('click', () => {
        category_selection = document.querySelector("#category_selection");
        
        category_text = document.createElement("input");
        category_text.setAttribute("type", "text");
        category_text.setAttribute("name", "category");

        category_selection.replaceWith(category_text);
    });
</script>