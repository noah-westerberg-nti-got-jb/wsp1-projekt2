<form action="/new" method="post">
    <div id="creation-form">
        <div><span>Title</span><input type="text" name="title" required></div>
        <div><span>Description</span><input type="text" name="description"></div>
        <div><span>Deadline</span>
            <input id="deadline-switch" type="checkbox" name="has_deadline">
            <input id="deadline-field" type="datetime-local" name="deadline" min="<%= DateTime.now.to_s.split('T')[0] + "00:00"%>"></div>
        <div>
            <span>Category</span>
            <button type="button" id="category-switch">+</button>
            <span id="category-list">
            <select id="category_selection" name="category" required>
                <% @categories.each do | category |%>
                    <option><%= category %></option>
                <% end %>
            </select></span>
            <span id="new-category" style="display: none;">
                <input type="text">
                Text Color:<input type="color" name="text_color">
                Background Color:<input type="color" name="background_color">
                Parent: <select name="parent">
                    <option selected>[none]</option>
                    <%@categories.each do | category |%>
                        <option><%=category%></option>
                    <%end%>
                </select>
            </span>
        </div>
        <div><span>Importance</span><input type="range" value="3" min="1" max="5" step="1" name="importance"></div>

        <div id="form-button-container">
        <button type="submit"> NEW </button>
        </div>
    </div>
</form>

<script type="text/javascript" src="/js/new_category_button.js?<%=Time.now.to_i%>"></script>
<script type="text/javascript" src="/js/deadline_field_state.js?<%=Time.now.to_i%>"></script>